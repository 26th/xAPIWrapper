<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Andy's LRS and xAPI Fun</title>
        <script type="text/javascript" src="./dist/xapiwrapper.min.js"></script>
    </head>
    <body>
        <div class="one">
            <p>
                This is a paragraph.
            </p>
            <p id="two">
                Wait for it ...
            </p>
            <p id="three">
                Thank you. Please drive though.
            </p>
        </div>
        <script type="text/javascript">
            var conf = {};
            conf['endpoint'] = "https://lrs.adlnet.gov/xapi/";
            try {
                conf['auth'] = 'Basic ' + toBase64('iitsecDemo:1234');
            } catch (e) {
                log('Exception in Config trying to encode auth: ' + e);
            } finally {

            }
            ADL.XAPIWrapper.changeConfig(conf);

            var stmt = new ADL.XAPIStatement(
                'mailto:andrew.creighton.ctr@adlnet.gov',
                'http://adlnet.gov/expapi/verbs/lunched',
                'http://lunchbox.adlnet.gov');
            stmt.generateId();
            ADL.XAPIWrapper.sendStatement(stmt);

            var print1 = function (stmt)
            {
                document.getElementById('two').innerHTML = JSON.stringify(stmt);
            }

            var printMany = function (stmtArr)
            {
                document.getElementById('three').innerHTML = JSON.stringify(stmtArr).replace(/},{/g, '}<br><br>{');
            }

            var stmts = ADL.XAPIWrapper.getStatements({'statementId': stmt.id});
            var mnyStmts = ADL.XAPIWrapper.getStatements({'verb': 'http://adlnet.gov/expapi/verbs/lunched'});
            print1(stmts);
            printMany(mnyStmts.statements);
        </script>
    </body>
</html>
