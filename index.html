<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Andy's LRS and xAPI Fun</title>
        <script type="text/javascript" src="./dist/xapiwrapper.min.js"></script>
        <script type="text/javascript">
            var conf = {};
            conf['endpoint'] = "https://lrs.adlnet.gov/xapi/";
            try {
                conf['auth'] = 'Basic ' + toBase64('iitsecDemo:1234');
            } catch (e) {
                log('Exception in Config trying to encode auth: ' + e);
            } finally {

            }
            ADL.XAPIWrapper.changeConfig(conf);

            var stmt = new ADL.XAPIStatement(
                'mailto:andrew.creighton.ctr@adlnet.gov',
                'http://adlnet.gov/expapi/verbs/launched',
                'http://sandbox.adlnet.gov');
            stmt.generateId();
            ADL.XAPIWrapper.sendStatement(stmt);

            var stmts = ADL.XAPIWrapper.getStatements({'statementId': stmt.id});
            ADL.XAPIWrapper.getStatements(null, null,
                    function(r){ADL.XAPIWrapper.log(JSON.parse(r.response).statements);});
        </script>
    </head>
    <body>
        <div class="one">
            <p>
                This is a paragraph.
            </p>
            <p id="two">
                Wait for it.
            </p>
            <script type="text/javascript">
                document.getElementById('two').innerHTML = JSON.stringify(stmts);
            </script>
        </div>
    </body>
</html>
